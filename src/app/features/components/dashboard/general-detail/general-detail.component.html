<div class="remote-details">
  <div class="detail-header">
    <div class="header-content">
      <div class="remote-info-section">
        <div class="icon-container">
          <mat-icon
            [svgIcon]="iconService.getIconName(selectedRemote.remoteSpecs.type)"
            class="remote-type-icon"
          ></mat-icon>
        </div>
        <div class="remote-text-info">
          <h2 class="remote-name" matTooltip="{{ selectedRemote.remoteSpecs.name }}">
            {{ selectedRemote.remoteSpecs.name }}
          </h2>
          <span class="remote-type">{{ selectedRemote.remoteSpecs.type | titlecase }}</span>
        </div>
      </div>
      <!-- Status Indicators -->
      <!-- Status Indicators -->
      <div class="remote-status-indicators" role="group" aria-label="Remote action quick selection">
        @for (actionConfig of actionConfigs; track trackByActionKey($index, actionConfig)) {
          <div
            class="status-chip"
            [class]="actionConfig.key"
            [class.selected]="isActionSelected(actionConfig.key)"
            [class.active]="isActionActive(actionConfig.key)"
            [class.disabled]="!isActionSelected(actionConfig.key) && !canSelectMoreActions()"
            role="button"
            tabindex="0"
            [attr.aria-pressed]="isActionSelected(actionConfig.key)"
            [attr.aria-label]="getAriaLabel(actionConfig.key)"
            [matTooltip]="getActionTooltip(actionConfig.key)"
            (click)="onToggleAction(actionConfig.key)"
            (keydown.enter)="onToggleAction(actionConfig.key)"
            (keydown.space)="onToggleAction(actionConfig.key)"
          >
            <!-- Status indicator dot with icon -->
            <div class="status-dot">
              <mat-icon [svgIcon]="actionConfig.icon"></mat-icon>
            </div>

            <!-- Selection badge showing position (1 or 2) -->
            @if (isActionSelected(actionConfig.key)) {
              <span class="selection-badge" aria-hidden="true">
                {{ getActionPosition(actionConfig.key) }}
              </span>
            }

            <!-- Action label -->
            <span class="status-label">{{ actionConfig.label }}</span>

            <!-- Screen reader only text for selection state -->
            @if (isActionSelected(actionConfig.key)) {
              <span class="cdk-visually-hidden">
                {{ actionConfig.label }} selected as quick action
                {{ getActionPosition(actionConfig.key) }}
              </span>
            }
          </div>
        }
      </div>
    </div>
    <div class="header-divider"></div>
  </div>

  <div class="detail-content">
    <!-- Disk Usage Panel -->
    <app-disk-usage-panel [config]="getDiskUsageConfig()"></app-disk-usage-panel>

    <!-- Jobs Panel -->
    <app-jobs-panel
      [config]="getJobsPanelConfig()"
      (stopJob)="stopJob.emit({ type: $event.type, remoteName: $event.remoteName })"
      (deleteJob)="deleteJob.emit($event)"
    >
    </app-jobs-panel>

    <!-- Remote Configuration Panel -->
    <app-settings-panel
      [config]="getRemoteConfigurationPanelConfig()"
      (editSettings)="onEditRemoteConfiguration()"
    >
    </app-settings-panel>
  </div>
</div>
