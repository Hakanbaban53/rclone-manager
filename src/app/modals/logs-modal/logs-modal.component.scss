:host {
  // Spacing
  --modal-padding: 24px;
  --modal-padding-mobile: 16px;
  --header-padding: 24px 32px;
  --content-gap: 24px;
  --content-gap-mobile: 16px;
  --toolbar-padding: 20px 24px;
  --terminal-padding: 16px;
  --log-entry-padding: 12px 16px;
  
  // Border radius
  --modal-border-radius: 16px;
  --card-border-radius: 12px;
  --input-border-radius: 8px;
  --terminal-border-radius: 12px;
  --button-border-radius: 8px;
  
  // Shadows and effects
  --shadow-light: 0 4px 24px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04);
  --shadow-elevated: 0 8px 32px rgba(0, 0, 0, 0.12), 0 4px 16px rgba(0, 0, 0, 0.08);
  --surface-overlay: rgba(var(--app-text-color-rgb), 0.03);
  --surface-border: rgba(var(--app-text-color-rgb), 0.08);
  
  // Terminal colors
  --terminal-background: #1e1e1e;
  --terminal-text: #e0e0e0;
  --terminal-header-bg: var(--secondary-background);
  --terminal-border: var(--surface-border);
  
  // Log level colors
  --log-info-color: var(--light-blue);
  --log-warn-color: var(--light-orange);
  --log-error-color: var(--red);
  --log-debug-color: #9e9e9e;
  --log-timestamp-color: var(--light-green);
  --log-remote-color: var(--light-blue);
  
  // Transitions
  --transition-standard: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-quick: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  
  // Typography
  --title-font-size: 20px;
  --toolbar-font-size: 14px;
  --log-font-size: 13px;
  --log-timestamp-size: 11px;
}

.log-modal {
  overflow: hidden;
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--app-background);
  border-radius: var(--modal-border-radius);
  box-shadow: var(--shadow-elevated);

  // Modal Header
  .modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(
      135deg,
      var(--secondary-background) 0%,
      rgba(var(--app-text-color-rgb), 0.02) 100%
    );
    border-bottom: 1px solid var(--surface-border);
    border-radius: var(--modal-border-radius) var(--modal-border-radius) 0 0;

    // Title with remote name
    p {
      font-weight: 500;
      font-size: var(--title-font-size);
      color: var(--app-text-color);
      letter-spacing: -0.25px;
      margin: 0;
      flex: 1;
      text-align: center;

      // Style the remote name part
      background: linear-gradient(
        135deg,
        var(--accent-color) 0%,
        var(--primary-color) 100%
      );
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

  }

  // Modal Content
  .modal-content {
    display: flex;
    flex-direction: column;
    padding: var(--modal-padding);
    flex: 1;
    height: 100%;
    overflow-y: auto;
    gap: var(--content-gap);

    // Logs Toolbar
    .logs-toolbar {
      display: flex;
      gap: 16px;
      align-items: flex-end;
      flex-wrap: wrap;
      padding: var(--toolbar-padding);
      background: var(--secondary-background);
      border-radius: var(--card-border-radius);
      border: 1px solid var(--surface-border);
      box-shadow: var(--shadow-light);

      .level-filter,
      .remote-filter,
      .search-filter {
        min-width: 160px;
        flex: 1;

        ::ng-deep {
          .mat-mdc-form-field {
            .mdc-outlined-field {
              border-radius: var(--input-border-radius);
              transition: var(--transition-standard);
              
              &:hover {
                .mdc-outlined-field__outline {
                  border-color: rgba(var(--primary-color-rgb), 0.4);
                }
              }
              
              &.mdc-outlined-field--focused {
                .mdc-outlined-field__outline {
                  border-color: var(--primary-color);
                  border-width: 2px;
                  box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.1);
                }
              }

              .mdc-outlined-field__outline {
                border-color: var(--surface-border);
              }
            }

            .mat-mdc-form-field-focus-overlay {
              background-color: rgba(var(--primary-color-rgb), 0.05);
              border-radius: var(--input-border-radius);
            }

            .mat-mdc-form-field-label {
              color: var(--secondary-text-color);
              font-weight: 500;
            }
          }

          .mat-mdc-select {
            .mat-mdc-select-trigger {
              border-radius: var(--input-border-radius);
            }

            .mat-mdc-select-arrow {
              color: var(--secondary-text-color);
            }
          }

          input {
            color: var(--app-text-color);
            font-weight: 400;
          }

          // Search icon styling
          .search-icon {
            color: var(--secondary-text-color);
            opacity: 0.7;
          }
        }

        // Level option styling in dropdown
        .level-option {
          display: flex;
          align-items: center;
          gap: 8px;
          font-weight: 500;

          .level-icon {
            font-size: 16px;
            width: 16px;
            height: 16px;
          }

          &.info .level-icon {
            color: var(--log-info-color);
          }

          &.warn .level-icon {
            color: var(--log-warn-color);
          }

          &.error .level-icon {
            color: var(--log-error-color);
          }

          &.debug .level-icon {
            color: var(--log-debug-color);
          }
        }
      }

      @media (max-width: 768px) {
        flex-direction: column;
        gap: 12px;

        .level-filter,
        .remote-filter,
        .search-filter {
          width: 100%;
          min-width: auto;
        }
      }
    }
    // Terminal Container
    .terminal-container {
      border: 1px solid var(--surface-border);
      border-radius: var(--terminal-border-radius);
      overflow: hidden;
      flex: 1;
      min-height: 300px;
      display: flex;
      flex-direction: column;
      background: linear-gradient(
        135deg,
        var(--primary-color) 0%,
        var(--accent-color) 100%
      );
      box-shadow: var(--shadow-light);
  
      // Terminal Header
      .terminal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: var(--terminal-header-bg);
        padding: 12px 16px;
        border-bottom: 1px solid var(--surface-border);
    
        // Terminal Actions
        .terminal-actions {
          display: flex;
          gap: 8px;
          align-items: center;

          button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: var(--button-border-radius);
            background: transparent;
            border: 1px solid var(--surface-border);
            color: var(--app-text-color);
            transition: var(--transition-quick);
            position: relative;
            overflow: hidden;

            &::before {
              content: '';
              position: absolute;
              top: 0;
              left: -100%;
              width: 100%;
              height: 100%;
              background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
              );
              transition: left 0.5s;
            }

            &:hover {
              border-color: rgba(var(--primary-color-rgb), 0.3);
              background: rgba(var(--primary-color-rgb), 0.1);
              color: var(--primary-color);
              transform: translateY(-1px);
              box-shadow: var(--shadow-light);

              &::before {
                left: 100%;
              }
            }

            &[color="warn"]:hover {
              border-color: rgba(var(--warn-color-rgb), 0.3);
              background: rgba(var(--warn-color-rgb), 0.1);
              color: var(--warn-color);
            }

            &:disabled {
              opacity: 0.5;
              cursor: not-allowed;
              transform: none;
              
              &:hover {
                background: transparent;
                border-color: var(--surface-border);
                color: var(--app-text-color);
                box-shadow: none;
              }
            }
          }
        }
      }

      // Loading Spinner
      .spinner-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 200px;
        background: var(--terminal-background);
        color: var(--terminal-text);

        mat-spinner {
          ::ng-deep {
            circle {
              stroke: var(--primary-color);
            }
          }
        }
      }

      // Empty Message
      .empty-message {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 64px 32px;
        color: var(--secondary-text-color);
        background: var(--terminal-background);
        height: 100%;
        gap: 20px;
        animation: fadeIn 0.3s ease-in-out;

        mat-icon {
          font-size: 64px;
          width: 64px;
          height: 64px;
          opacity: 0.4;
          color: var(--secondary-text-color);
          background: linear-gradient(
            135deg,
            rgba(var(--secondary-text-color-rgb), 0.1) 0%,
            rgba(var(--secondary-text-color-rgb), 0.05) 100%
          );
          border-radius: 50%;
          padding: 20px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        p {
          font-size: 18px;
          font-weight: 500;
          margin: 0;
          color: var(--terminal-text);

          &.hint {
            font-size: 14px;
            margin-top: 8px;
            color: var(--secondary-text-color);
            opacity: 0.8;
          }
        }
      }
      // Terminal Log Area
      .terminal-log-area {
        background: var(--terminal-background);
        color: var(--terminal-text);
        font-family: "JetBrains Mono", "Fira Code", "Courier New", monospace;
        padding: var(--terminal-padding);
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
        display: grid;
        flex-direction: column;
        gap: 10px;
        min-height: 0;
        line-height: 1.4;
        
        // Custom scrollbar
        scrollbar-width: thin;
        scrollbar-color: rgba(var(--primary-color-rgb), 0.3) transparent;
        
        &::-webkit-scrollbar {
          width: 8px;
        }
        
        &::-webkit-scrollbar-track {
          background: transparent;
        }
        
        &::-webkit-scrollbar-thumb {
          background: rgba(var(--primary-color-rgb), 0.3);
          border-radius: 4px;
          
          &:hover {
            background: rgba(var(--primary-color-rgb), 0.5);
          }
        }
  
        // Log Entry
        .log-entry {
          display: grid;
          grid-template-columns: auto auto auto 1fr auto;
          gap: 12px;
          align-items: center;
          padding: var(--log-entry-padding);
          border-radius: var(--button-border-radius);
          transition: var(--transition-quick);
          position: relative;
          font-size: var(--log-font-size);
          animation: fadeIn 0.3s ease-out;
  
          &:hover {
            transform: translateX(4px);
          }

          // Level-specific backgrounds and styling
          &.log-info {
            background: rgba(var(--light-blue-rgb), 0.05);
            border-left: 3px solid rgba(var(--light-blue-rgb), 0.4);
            
            &:hover {
              background: rgba(var(--light-blue-rgb), 0.08);
              border-left-color: var(--light-blue);
            }

            &.has-context {
              background: rgba(var(--light-blue-rgb), 0.08);
              border-left-color: var(--light-blue);
              
              &:hover {
                background: rgba(var(--light-blue-rgb), 0.12);
              }
            }

            &.expanded {
              background: rgba(var(--light-blue-rgb), 0.12);
              border-left-color: var(--accent-color);
              
              &:hover {
                background: rgba(var(--light-blue-rgb), 0.15);
              }
            }
          }

          &.log-error {
            background: rgba(var(--red-rgb), 0.05);
            border-left: 3px solid rgba(var(--red-rgb), 0.4);
            
            &:hover {
              background: rgba(var(--red-rgb), 0.08);
              border-left-color: var(--red);
            }

            &.has-context {
              background: rgba(var(--red-rgb), 0.08);
              border-left-color: var(--red);
              
              &:hover {
                background: rgba(var(--red-rgb), 0.12);
              }
            }

            &.expanded {
              background: rgba(var(--red-rgb), 0.12);
              border-left-color: var(--warn-color);
              
              &:hover {
                background: rgba(var(--red-rgb), 0.15);
              }
            }
          }

          &.log-warn {
            background: rgba(var(--light-orange-rgb), 0.05);
            border-left: 3px solid rgba(var(--light-orange-rgb), 0.4);
            
            &:hover {
              background: rgba(var(--light-orange-rgb), 0.08);
              border-left-color: var(--light-orange);
            }

            &.has-context {
              background: rgba(var(--light-orange-rgb), 0.08);
              border-left-color: var(--light-orange);
              
              &:hover {
                background: rgba(var(--light-orange-rgb), 0.12);
              }
            }

            &.expanded {
              background: rgba(var(--light-orange-rgb), 0.12);
              border-left-color: var(--orange);
              
              &:hover {
                background: rgba(var(--light-orange-rgb), 0.15);
              }
            }
          }

          &.log-debug {
            background: rgba(158, 158, 158, 0.05);
            border-left: 3px solid rgba(158, 158, 158, 0.4);
            
            &:hover {
              background: rgba(158, 158, 158, 0.08);
              border-left-color: #9e9e9e;
            }

            &.has-context {
              background: rgba(158, 158, 158, 0.08);
              border-left-color: #9e9e9e;
              
              &:hover {
                background: rgba(158, 158, 158, 0.12);
              }
            }

            &.expanded {
              background: rgba(158, 158, 158, 0.12);
              border-left-color: #757575;
              
              &:hover {
                background: rgba(158, 158, 158, 0.15);
              }
            }
          }

          // Default styling for logs without specific level
          &:not(.log-info):not(.log-error):not(.log-warn):not(.log-debug) {
            background: rgba(var(--app-text-color-rgb), 0.02);
            
            &:hover {
              background: rgba(var(--app-text-color-rgb), 0.05);
            }

            &.has-context {
              border-left: 3px solid rgba(var(--primary-color-rgb), 0.5);
              padding-left: 13px;
              background: rgba(var(--primary-color-rgb), 0.02);
              
              &:hover {
                background: rgba(var(--primary-color-rgb), 0.05);
                border-left-color: var(--primary-color);
              }
            }

            &.expanded {
              background: rgba(var(--primary-color-rgb), 0.05);
              margin-bottom: 8px;
              border-left-color: var(--primary-color);
              
              &:hover {
                background: rgba(var(--primary-color-rgb), 0.08);
              }
            }
          }
  
          // Timestamp
          .timestamp {
            color: var(--log-timestamp-color);
            font-size: var(--log-timestamp-size);
            font-weight: 500;
            flex-shrink: 0;
            min-width: 80px;
            letter-spacing: 0.25px;
            background: rgba(var(--light-green-rgb), 0.1);
            padding: 2px 6px;
            border-radius: 4px;
          }
  
          // Remote Name
          .remote-name {
            color: var(--log-remote-color);
            font-weight: 600;
            flex-shrink: 0;
            font-size: calc(var(--log-font-size) - 1px);
            background: rgba(var(--light-blue-rgb), 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            border: 1px solid rgba(var(--light-blue-rgb), 0.2);
          }
  
          // Log Level
          .level {
            font-weight: 700;
            flex-shrink: 0;
            width: 60px;
            text-align: center;
            font-size: calc(var(--log-font-size) - 1px);
            padding: 3px 8px;
            border-radius: 4px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
  
            &.info {
              color: var(--log-info-color);
              background: rgba(var(--light-blue-rgb), 0.15);
              border: 1px solid rgba(var(--light-blue-rgb), 0.3);
            }
            
            &.error {
              color: var(--log-error-color);
              background: rgba(var(--red-rgb), 0.15);
              border: 1px solid rgba(var(--red-rgb), 0.3);
            }
            
            &.warn {
              color: var(--log-warn-color);
              background: rgba(var(--light-orange-rgb), 0.15);
              border: 1px solid rgba(var(--light-orange-rgb), 0.3);
            }
            
            &.debug {
              color: var(--log-debug-color);
              background: rgba(158, 158, 158, 0.15);
              border: 1px solid rgba(158, 158, 158, 0.3);
            }
          }
  
          // Message
          .message {
            color: var(--terminal-text);
            flex-grow: 1;
            font-size: var(--log-font-size);
            white-space: pre-wrap;
            word-break: break-word;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: var(--button-border-radius);
            transition: var(--transition-quick);
            line-height: 1.5;
            
            &:hover {
              background: rgba(var(--app-text-color-rgb), 0.05);
              color: var(--primary-color);
            }
          }
  
          // Log Actions
          .log-actions {
            display: flex;
            margin-left: auto;
            opacity: 0;
            transition: var(--transition-quick);
  
            button {
              display: flex;
              align-items: center;
              justify-content: center;
              width: 28px;
              height: 28px;
              border-radius: var(--button-border-radius);
              background: transparent;
              border: 1px solid transparent;
              color: var(--secondary-text-color);
              transition: var(--transition-quick);
              padding: 0;
              
              &:hover {
                background: rgba(var(--primary-color-rgb), 0.1);
                border-color: rgba(var(--primary-color-rgb), 0.3);
                color: var(--primary-color);
                transform: translateY(-1px);
              }
            }
          }

          &:hover .log-actions {
            opacity: 1;
          }
  
          // Log Context (Expanded Details)
          .log-context {
            grid-column: 1 / -1;
            background: rgba(var(--terminal-background), 0.8);
            margin: 12px -16px -12px -16px;
            padding: 16px 20px;
            border-top: 1px solid rgba(var(--primary-color-rgb), 0.3);
            border-bottom: 1px solid rgba(var(--primary-color-rgb), 0.3);
            font-size: calc(var(--log-font-size) - 1px);
            color: var(--light-green);
            border-radius: 0 0 var(--button-border-radius) var(--button-border-radius);
            position: relative;
            
            &::before {
              content: '';
              position: absolute;
              top: 0;
              left: 0;
              right: 0;
              height: 2px;
              background: linear-gradient(
                90deg,
                transparent 0%,
                var(--primary-color) 50%,
                transparent 100%
              );
            }
  
            pre {
              margin: 0;
              white-space: pre-wrap;
              word-break: break-word;
              font-family: inherit;
              line-height: 1.6;
              color: var(--light-green);
              background: rgba(var(--light-green-rgb), 0.05);
              padding: 12px;
              border-radius: var(--button-border-radius);
              border: 1px solid rgba(var(--light-green-rgb), 0.2);
            }
          }

          // Level-specific context styling
          &.log-info .log-context {
            border-top-color: rgba(var(--light-blue-rgb), 0.5);
            border-bottom-color: rgba(var(--light-blue-rgb), 0.5);
            
            &::before {
              background: linear-gradient(
                90deg,
                transparent 0%,
                var(--light-blue) 50%,
                transparent 100%
              );
            }

            pre {
              background: rgba(var(--light-blue-rgb), 0.05);
              border-color: rgba(var(--light-blue-rgb), 0.2);
              color: var(--light-blue);
            }
          }

          &.log-error .log-context {
            border-top-color: rgba(var(--red-rgb), 0.5);
            border-bottom-color: rgba(var(--red-rgb), 0.5);
            
            &::before {
              background: linear-gradient(
                90deg,
                transparent 0%,
                var(--red) 50%,
                transparent 100%
              );
            }

            pre {
              background: rgba(var(--red-rgb), 0.05);
              border-color: rgba(var(--red-rgb), 0.2);
              color: #ff6b6b;
            }
          }

          &.log-warn .log-context {
            border-top-color: rgba(var(--light-orange-rgb), 0.5);
            border-bottom-color: rgba(var(--light-orange-rgb), 0.5);
            
            &::before {
              background: linear-gradient(
                90deg,
                transparent 0%,
                var(--light-orange) 50%,
                transparent 100%
              );
            }

            pre {
              background: rgba(var(--light-orange-rgb), 0.05);
              border-color: rgba(var(--light-orange-rgb), 0.2);
              color: var(--light-orange);
            }
          }

          &.log-debug .log-context {
            border-top-color: rgba(158, 158, 158, 0.5);
            border-bottom-color: rgba(158, 158, 158, 0.5);
            
            &::before {
              background: linear-gradient(
                90deg,
                transparent 0%,
                #9e9e9e 50%,
                transparent 100%
              );
            }

            pre {
              background: rgba(158, 158, 158, 0.05);
              border-color: rgba(158, 158, 158, 0.2);
              color: #bdbdbd;
            }
          }
        }
      }
    }
  }

  // Animations
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  // Responsive Design
  @media (max-width: 768px) {
    :host {
      --modal-padding: var(--modal-padding-mobile);
      --content-gap: var(--content-gap-mobile);
      --header-padding: 16px 20px;
      --toolbar-padding: 16px 20px;
      --terminal-padding: 12px;
      --log-entry-padding: 8px 12px;
    }

    .log-modal {
      .modal-header {
        p {
          font-size: 18px;
          padding: 0 12px;
        }

        button:first-child,
        button:last-child {
          width: 36px;
          height: 36px;
        }
      }

      .modal-content {
        .terminal-container {
          .terminal-header {
            padding: 8px 12px;

            .terminal-actions {
              button {
                width: 32px;
                height: 32px;
              }
            }
          }

          .terminal-log-area {
            .log-entry {
              grid-template-columns: 1fr;
              gap: 8px;
              text-align: left;

              .timestamp,
              .level,
              .remote-name {
                justify-self: start;
              }

              .log-actions {
                opacity: 1;
                justify-self: end;
                grid-column: 1;
                grid-row: 1;
              }

              .message {
                grid-column: 1;
                margin-top: 4px;
              }
            }
          }
        }
      }
    }
  }

  @media (max-width: 480px) {
    .log-modal {
      .modal-content {
        .terminal-container {
          .terminal-log-area {
            .log-entry {
              .level {
                width: auto;
                min-width: 50px;
              }
            }
          }
        }
      }
    }
  }
}

